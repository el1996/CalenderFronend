{"ast":null,"code":"var _jsxFileName = \"/Users/omarhmdea/Documents/calendar-front/src/context/AuthContext.js\",\n  _s = $RefreshSig$();\nimport { FOCUSABLE_SELECTOR } from \"@testing-library/user-event/dist/utils\";\nimport axios from \"axios\";\nimport { createContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AuthService from \"../services/AuthService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport const AuthContextProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isAuth, setIsAuth] = useState(false);\n  const [errors, setErrors] = useState({});\n  //const navigate = useNavigate();\n\n  const login = async newUser => {\n    try {\n      const result = await AuthService.loginViaEmail(newUser);\n      setCurrentUser(result.data.data);\n      setErrors({});\n      setIsAuth(true);\n    } catch (error) {\n      var _error$response;\n      setErrors(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data.errors);\n    }\n  };\n  const register = async newUser => {\n    try {\n      const result = await AuthService.register(newUser);\n      setCurrentUser(result.data.data);\n      setErrors({});\n    } catch (error) {\n      var _error$response2;\n      setErrors(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data.errors);\n    }\n  };\n  const logout = async () => {\n    setCurrentUser(null);\n    setIsAuth(false);\n  };\n  useEffect(() => {\n    let user = window.sessionStorage.getItem(\"currentUser\");\n    if (user) {\n      user = JSON.parse(user);\n    }\n    setCurrentUser(user);\n    setIsAuth(window.sessionStorage.getItem(\"isAuth\") === \"true\");\n  }, []);\n  useEffect(() => {\n    window.sessionStorage.setItem(\"currentUser\", JSON.stringify(currentUser));\n    window.sessionStorage.setItem(\"isAuth\", isAuth);\n  }, [currentUser, isAuth]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      currentUser,\n      setCurrentUser,\n      isAuth,\n      setIsAuth,\n      login,\n      logout,\n      register,\n      errors,\n      setErrors\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 3\n  }, this);\n};\n_s(AuthContextProvider, \"jjfdbq5NtiHwRjKP7rs1hxLL9HU=\");\n_c = AuthContextProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthContextProvider\");","map":{"version":3,"names":["FOCUSABLE_SELECTOR","axios","createContext","useEffect","useState","useNavigate","AuthService","AuthContext","AuthContextProvider","children","currentUser","setCurrentUser","isAuth","setIsAuth","errors","setErrors","login","newUser","result","loginViaEmail","data","error","response","register","logout","user","window","sessionStorage","getItem","JSON","parse","setItem","stringify"],"sources":["/Users/omarhmdea/Documents/calendar-front/src/context/AuthContext.js"],"sourcesContent":["import { FOCUSABLE_SELECTOR } from \"@testing-library/user-event/dist/utils\";\nimport axios from \"axios\";\nimport { createContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport AuthService from \"../services/AuthService\";\n\nexport const AuthContext = createContext();\n\nexport const AuthContextProvider = ({ children }) => {\n\tconst [currentUser, setCurrentUser] = useState(null);\n\tconst [isAuth, setIsAuth] = useState(false);\n\tconst [errors, setErrors] = useState({});\n\t//const navigate = useNavigate();\n\n\tconst login = async (newUser) => {\n\t\ttry {\n\t\t\tconst result = await AuthService.loginViaEmail(newUser);\n\t\t\tsetCurrentUser(result.data.data);\n\t\t\tsetErrors({});\n\t\t\tsetIsAuth(true);\n\t\t} catch (error) {\n\t\t\tsetErrors(error?.response?.data.errors);\n\t\t}\n\t};\n\n\tconst register = async (newUser) => {\n\t\ttry {\n\t\t\tconst result = await AuthService.register(newUser);\n\t\t\tsetCurrentUser(result.data.data);\n\t\t\tsetErrors({});\n\t\t} catch (error) {\n\t\t\tsetErrors(error?.response?.data.errors);\n\t\t}\n\t};\n\n\tconst logout = async () => {\n\t\tsetCurrentUser(null);\n\t\tsetIsAuth(false);\n\t};\n\n\tuseEffect(() => {\n\t\tlet user = window.sessionStorage.getItem(\"currentUser\");\n\t\tif (user) {\n\t\t\tuser = JSON.parse(user);\n\t\t}\n\t\tsetCurrentUser(user);\n\t\tsetIsAuth(window.sessionStorage.getItem(\"isAuth\") === \"true\");\n\t}, []);\n\n\tuseEffect(() => {\n\t\twindow.sessionStorage.setItem(\n\t\t\t\"currentUser\",\n\t\t\tJSON.stringify(currentUser)\n\t\t);\n\t\twindow.sessionStorage.setItem(\"isAuth\", isAuth);\n\t}, [currentUser, isAuth]);\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{\n\t\t\t\tcurrentUser,\n\t\t\t\tsetCurrentUser,\n\t\t\t\tisAuth,\n\t\t\t\tsetIsAuth,\n\t\t\t\tlogin,\n\t\t\t\tlogout,\n\t\t\t\tregister,\n\t\t\t\terrors,\n\t\t\t\tsetErrors,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</AuthContext.Provider>\n\t);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}